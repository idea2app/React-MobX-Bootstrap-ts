var e;(0,(e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire8abc).register)("BWRo5",function(t,n){Object.defineProperty(t.exports,"FileHandle",{get:function(){return g},set:void 0,enumerable:!0,configurable:!0});var r=e("8ANeE"),i=e("59v1D"),o=e("aAf84"),a=e("6DUu1"),s=e("bYvMD"),u=e("g3Qtd"),c=e("g1fRc"),l=e("2taKJ"),d=e("cSRQI"),f=d.default.WritableStream,h=d.default.TransformStream,p=d.default.DOMException,_=d.default.Blob,y=l.errors.GONE,v=/constructor/i.test(window.HTMLElement),g=/*#__PURE__*/function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unkown";(0,i._)(this,e),this.name=t,this.kind="file"}return(0,a._)(e,[{key:"getFile",value:function(){return(0,r._)(function(){return(0,c.__generator)(this,function(e){throw(0,o._)(p,(0,u._)(y))})})()}},{key:"isSameEntry",value:function(e){var t=this;return(0,r._)(function(){return(0,c.__generator)(this,function(n){return[2,t===e]})})()}},{key:"createWritable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;return(0,r._)(function(){var n,r,i,o,a,u,l,d,p,y,g,m,w;return(0,c.__generator)(this,function(c){switch(c.label){case 0:return[4,null===(n=navigator.serviceWorker)||void 0===n?void 0:n.getRegistration()];case 1:return r=c.sent(),i=document.createElement("a"),a=(o=new h).writable,i.download=t.name,v||!r?(u=[],o.readable.pipeTo(new f({write:function(e){u.push(new _([e]))},close:function(){var e=new _(u,{type:"application/octet-stream; charset=utf-8"});u=[],i.href=URL.createObjectURL(e),i.click(),setTimeout(function(){return URL.revokeObjectURL(i.href)},1e4)}}))):(d=(l=new b(f)).writable,p=l.readablePort,y=encodeURIComponent(t.name).replace(/['()]/g,escape).replace(/\*/g,"%2A"),g=(0,s._)({"content-disposition":"attachment; filename*=UTF-8''"+y,"content-type":"application/octet-stream; charset=utf-8"},e.size?{"content-length":e.size}:{}),m=setTimeout(function(){return r.active.postMessage(0)},1e4),o.readable.pipeThrough(new h({transform:function(e,t){if(e instanceof Uint8Array)return t.enqueue(e);var n=new Response(e).body.getReader(),r=function(e){return n.read().then(function(e){return e.done?0:r(t.enqueue(e.value))})};return r()}})).pipeTo(d).finally(function(){clearInterval(m)}),r.active.postMessage({url:r.scope+y,headers:g,readablePort:p},[p]),(w=document.createElement("iframe")).hidden=!0,w.src=r.scope+y,document.body.appendChild(w)),[2,a.getWriter()]}})})()}}]),e}(),m=/*#__PURE__*/function(){function e(t){var n=this;(0,i._)(this,e),t.onmessage=function(e){return n._onMessage(e.data)},this._port=t,this._resetReady()}return(0,a._)(e,[{key:"start",value:function(e){return this._controller=e,this._readyPromise}},{key:"write",value:function(e){return this._port.postMessage({type:0,chunk:e},[e.buffer]),this._resetReady(),this._readyPromise}},{key:"close",value:function(){this._port.postMessage({type:2}),this._port.close()}},{key:"abort",value:function(e){this._port.postMessage({type:1,reason:e}),this._port.close()}},{key:"_onMessage",value:function(e){0===e.type&&this._resolveReady(),1===e.type&&this._onError(e.reason)}},{key:"_onError",value:function(e){this._controller.error(e),this._rejectReady(e),this._port.close()}},{key:"_resetReady",value:function(){var e=this;this._readyPromise=new Promise(function(t,n){e._readyResolve=t,e._readyReject=n}),this._readyPending=!0}},{key:"_resolveReady",value:function(){this._readyResolve(),this._readyPending=!1}},{key:"_rejectReady",value:function(e){this._readyPending||this._resetReady(),this._readyPromise.catch(function(){}),this._readyReject(e),this._readyPending=!1}}]),e}(),b=function e(t){(0,i._)(this,e);var n=new MessageChannel;this.readablePort=n.port1,this.writable=new t(new m(n.port2))}});
//# sourceMappingURL=downloader.479710f2.js.map
